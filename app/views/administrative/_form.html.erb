<%= javascript_include_tag "administrative" %>

<%= form_with(model: type_process, local: true) do |form| %>
  <% if type_process.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(type_process.errors.count, "error") %> prohibited this type_process from being saved:</h2>
      <ul>
        <% type_process.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="row">
    <div class="offset-lg-2 col-lg-8 ">

      <p>El símbolo ( <span class="red">*</span> ) marca los campos que son obligatorios.</p>

      <% if current_user.role != 3 %>
        <%= form.hidden_field :p_type, :value => 4 %>
        <%= form.hidden_field :user_id, :value => current_user.id %>
        <%= form.hidden_field :internal_lawyer, :value => current_user.name %>
        <%= form.hidden_field :state, id:"state_val" %>
      <% end %>

      <hr>

      <%= form.label :process_class, "Clase de Proceso" %>
      <div class="input-group">
        <%= form.collection_select(:process_class , ProcessClass.administrative, :name, :name, {}, {class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.process_class_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :subprocess_class, "Subclase del Proceso" %><span class="red">*</span>
      <div class="input-group">
        <%= form.collection_select(:subprocess_class , SubprocessClass.administrative, :name , :name, {include_blank: "SELECCIONE"}, {class:"form-control", id:"subprocessClass", required: true}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.subprocess_class_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

      <%= form.label :process_radicate, "Número de radicación del proceso" %><span class="red">*</span>
      <div class="input-group">
        <%= form.text_field :process_radicate, id:"process_radicate", maxlength:"100", pattern:"[A-Z0-9\- ]*", title: t(:pattern), placeholder: 'INGRESE EL NUMERO', onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", required: true, class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.judicial.process_radicate_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :case_id_bap, "Número de identificación del caso (Bizagi y PA)" %>
      <div class="input-group">
        <%= form.text_field :case_id_bap, id:"case_id_bap", maxlength:"100", pattern:"[A-Z0-9\- ]*", title: t(:pattern), placeholder: "INGRESE EL NUMERO", onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.case_id_bap_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

      <%= form.label :link_type, "Tipo de vinculación" %>
      <div class="input-group">
        <%= form.collection_select(:link_type, LinkType.administrative, :name, :name, {}, {class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.link_type_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :departament, "Departamento donde cursa el caso" %>
      <div class="input-group">
        <%= form.collection_select(:departament, Departament.get_all, :code, :name, {include_blank: "SELECCIONE"}, {id:"departament_ordinarie", class:"form-control"}) %>
        <%= form.collection_select(:departament, Departament.get_bog, :code, :name, {selected: "11"}, {id:"departament_coljuegos", class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.departament_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :cities, "Ciudad donde cursa el caso" %>
      <div class="input-group">
        <select name="type_process[city_case]" id="cities" class="form-control">
          <option value="<%= type_process.city_case %>" selected="selected"><%= type_process.city_case %></option>
        </select>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.city_case_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

      <%= form.label :litigation_source, "Fuente del litigio" %>
      <div class="input-group">
        <%= form.collection_select(:litigation_source, LitigationSource.administrative, :name, :name, {include_blank: "SELECCIONE"}, {id:"litigationSource", class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.litigation_source_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :ensurance_value_cents, "Valor asegurado" %>
      <div class="input-group">
        <%= form.text_field :ensurance_value_cents, id:"ensuranceValue", maxlength:"20", pattern:"[0-9\,\' ]*", title: t(:pattern_n), onclick:"formatting_number(this)", onkeyup:"formatting_number(this)", onblur:"formatting_empty_number(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.ensurance_value_cents_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :policy_cents, "Póliza" %>
      <div class="input-group">
        <%= form.number_field :policy_cents, id:"policyCents", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.policy_cents_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :protection, "Amparo" %>
      <div class="input-group">
        <%= form.collection_select(:protection, Protection.coljuegos, :name, :name, {:selected => type_process.send(:protection)}, {id:"protection_coljuegos", multiple:true, class:"form-control"}) %>
        <%= form.collection_select(:protection, Protection.ordinarie, :name, :name, {:selected => type_process.send(:protection)}, {id:"protection_ordinarie", multiple:true, class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.protection_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :branch_policy, "Sucursal de la póliza" %>
      <div class="input-group">
        <%= form.collection_select(:branch_policy, BranchPolicy.all, :num, :large_name, {}, {class:"form-control", :id => "branch_policy" }) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.branch_policy_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
        <%= form.hidden_field :branch_policy, value:"NO PRESENTA", id:"branch_policy_hid" %>
      </div>

      <%= form.label :branch_commercial, "Ramo comercial" %>
      <div class="input-group">
        <%= form.collection_select(:branch_commercial, BranchCommercial.all, :num, :large_name, {}, {class:"form-control", :id => "branch_commercial" }) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.branch_commercial_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
        <%= form.hidden_field :branch_commercial, value:"NO PRESENTA", id:"branch_commercial_hid" %>
      </div>

      <%= form.label :has_more_polcies, "¿Tiene más pólizas?" %>
      <div class="input-group">
        <%= form.select :has_more_polcies, options_for_select([["NO", false], ["SI", true]]), {}, {id: "more_policies", class:"form-control"} %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.prejudicial.more_policies_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :policies, "Número de pólizas" %>
      <div class="input-group">
        <%= form.text_area :policies, maxlength:"255", pattern:"[A-Z0-9\- ]*", title: t(:pattern), onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", id:"policies", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.policies_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :policy_taker, "Tomador de la póliza" %>
      <div class="input-group">
        <%= form.text_field :policy_taker, id:"policy_taker", maxlength:"100", pattern:"[A-Z0-9\- ]*", title: t(:pattern), placeholder: 'NOMBRE COMPLETO', onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.policy_taker_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :contract, "Contrato concesión - Obra" %>
      <div class="input-group">
        <%= form.text_field :contract, id:"contract", maxlength:"10", pattern:"[A-Z0-9\- ]*", title: t(:pattern), onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.contract_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

      <%= form.label :detritment_cents, "Valor de la pretensión / detrimento" %>
      <div class="input-group">
        <%= form.text_field :detritment_cents, id:"detrimetValueCents", maxlength:"20", pattern:"[0-9\,\' ]*", title: t(:pattern_n), onclick:"formatting_number(this)", onkeyup:"formatting_number(this)", onblur:"formatting_empty_number(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.detritment_cents_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

      <%= form.label :notification_date, "Fecha de notificación / vinculación" %><span class="red">*</span>
      <div class="input-group">
        <%= form.date_field :notification_date, class:"form-control", required: true, min:"1980-1-1", max:Date.today %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.notification_date_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :office_name, "Nombre del despacho / Tipo de Contraloría" %>
      <div class="input-group">
        <%= form.collection_select(:office_name, OfficeName.coljuegos, :name, :name, {}, {id:"office_name_col", class:"form-control"}) %>
        <%= form.collection_select(:office_name, OfficeName.ordinare, :name, :name, {include_blank:"SELECCIONE"}, {id:"office_name_ord", class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.office_name_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>
      <div class="input-group">
        <%= form.text_field :other_office_name, maxlength:"100", pattern:"[A-Z0-9\- ]*", title: t(:pattern), placeholder:'NOMBRE DEL DESPACHO', required: true, id: "office_text", class: "form-control" %>
      </div>

      <%= form.label :score_contingency, "Calificación de la contingencia" %>
      <div class="input-group">
        <%= form.collection_select(:score_contingency, ScoreContingency.all, :name, :name, {}, {class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.score_contingency_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :contingency_resume, "Resumen de la contingencia" %>
      <div class="input-group">
        <%= form.text_area :contingency_resume, id:"contingency_resume", maxlength:"2500", pattern:"[A-Z0-9\- ]*", title: t(:pattern), onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.contingency_resume_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :contingency_reason, "Motivos de la contingencia" %>
      <div class="input-group">
        <%= form.text_area :contingency_reason, id:"contingency_reason", maxlength:"2500", pattern:"[A-Z0-9\- ]*", title: t(:pattern), onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.contingency_reason_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :instance, "Instancia" %>
      <div class="input-group">
        <%= form.collection_select(:instance, Instance.administrative, :name, :name, {}, {class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.instance_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :case_state, "Estado del caso" %>
      <div class="input-group">
        <%= form.collection_select(:case_state, CaseState.all, :name, :name, {include_blank:"SELECCIONE"}, {id:"caseState", required:true, class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.case_state_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

      <%= form.label :current_stage, "Etapa actual", id:"currentStage" %>
      <div id="currentStageVerDiv" class="input-group">
        <%= form.collection_select(:current_stage, CurrentStage.administrative, :name, :name, {}, {id:"currentStageVer", class:"form-control"}) %>
        <%= form.hidden_field :current_stage, value:"PENDIENTE", id:"currentStageHid" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.current_stage_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :fail_value_cents, "Valor de la sanción" %>
      <div class="input-group">
        <%= form.text_field :fail_value_cents, id:"fail_value", maxlength:"20", pattern:"[0-9\,\' ]*", title: t(:pattern_n), onclick:"formatting_number(this)", onkeyup:"formatting_number(this)", onblur:"formatting_empty_number(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.fail_value_cents_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :desition_date, "Fecha del acto administrativo" %>
      <div class="input-group">
        <%= form.date_field :desition_date, class:"form-control", id:"desition_date" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.desition_date_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :fail_previ_cents, "Valor de la sanción a cargo de Previsora" %>
      <div class="input-group">
        <%= form.text_field :fail_previ_cents, id:"fail_previ", maxlength:"20", pattern:"[0-9\,\' ]*", title: t(:pattern_n), onclick:"formatting_number(this)", onkeyup:"formatting_number(this)", onblur:"formatting_empty_number(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.fail_previ_cents_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :case_termination, "Terminación del caso" %>
      <div class="input-group">
        <%= form.collection_select(:case_termination, CaseTermination.administrative, :name, :name, {include_blank: 'SELECCIONE'}, {class:"form-control", id:"caseTermination"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.case_termination_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
        <%= form.hidden_field :case_termination, value:"NO PRESENTA", id:"caseTermination_hid" %>
      </div>

      <%= form.label :has_coactive_radicate, "¿Tiene número de radicado de coactivo?" %>
      <div class="input-group">
        <%= form.select :has_coactive_radicate, options_for_select([["NO", false], ["SI", true]]), {}, {id: "coactive", class:"form-control"} %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.judicial.coactive_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :coactive_radicate, "Número de radicación de coactivo" %>
      <div class="input-group">
        <%= form.text_field :coactive_radicate, id:"coactive_radicate",  onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.coactive_radicate_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :coactive_value_cents, "Valor del coactivo" %>
      <div class="input-group">
        <%= form.text_field :coactive_value_cents, id:"coactive_value_cents", maxlength:"20", pattern:"[0-9\,\' ]*", title: t(:pattern_n), onclick:"formatting_number(this)", onkeyup:"formatting_number(this)", onblur:"formatting_empty_number(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.coactive_value_cents_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :garnish_value_cents, "Valor del embargo" %>
      <div class="input-group">
        <%= form.text_field :garnish_value_cents, id:"garnish_value", maxlength:"20", pattern:"[0-9\,\' ]*", title: t(:pattern_n), onclick:"formatting_number(this)", onkeyup:"formatting_number(this)", onblur:"formatting_empty_number(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.garnish_value_cents_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :last_performance, "Última actuación" %>
      <div class="input-group">
        <%= form.collection_select(:last_performance, LastPerformance.all, :name, :name, {}, {class:"form-control", id:"lastPerformance"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.last_performance_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :last_performance_date, "Fecha de la última actuación" %>
      <div class="input-group">
        <%= form.date_field :last_performance_date, id:"lastPerformanceDate", min:"1980-1-1", max:Date.today, class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.last_performance_date_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

    </div>
  </div>

  <%= form.submit "Guardar", class:"btn btn-default floatRight" %>

<% end %>
