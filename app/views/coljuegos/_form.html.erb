<%= javascript_include_tag "coljuegos" %>

<%= form_with(model: type_process, local: true) do |form| %>
  <% if type_process.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(type_process.errors.count, "error") %> prohibited this type_process from being saved:</h2>
      <ul>
        <% type_process.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="row">
    <div class="offset-lg-2 col-lg-8 ">

      <p>El símbolo ( <span class="red">*</span> ) marca los campos que son obligatorios.</p>

      <% if current_user.role != 3 %>
        <%= form.hidden_field :p_type, :value => 6 %>
        <%= form.hidden_field :user_id, :value => current_user.id %>
        <%= form.hidden_field :internal_lawyer, :value => current_user.name %>
        <%= form.hidden_field :internal_created %>
        <%= form.hidden_field :state, id:"state_val" %>
      <% end %>

      <hr>

      <%= form.label :process_class, "Clase de Proceso" %>
      <div class="input-group">
        <%= form.collection_select(:process_class , ProcessClass.administrative, :name, :name, {}, {class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.process_class_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :subprocess_class, "Subclase de Proceso" %> <span class="red">*</span>
      <div class="input-group">
        <%= form.collection_select(:subprocess_class , SubprocessClass.administrative, :name , :name, {include_blank: "SELECCIONE"}, {class:"form-control", id:"subprocessClass", required: true}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.subprocess_class_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

      <%= form.label :has_correspondency_radicate, "¿Tiene número de radicado de Correspondencia / Vicepresidencia?" %>
      <div class="input-group">
        <%= form.select :has_correspondency_radicate, [["NO", false], ["SI", true]], {}, {id: "radicate", class:"form-control"} %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.prejudicial.radicate_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :correspondency_radicate, "Número de radicado de Correspondencia o de Vicepresidencia" %>
      <div class="input-group">
        <%= form.text_field :correspondency_radicate, maxlength:"100", pattern:"[0-9\- ]*", title: t(:pattern_n), placeholder: "INGRESE EL NUMERO", id:"correspondency_radicate", onclick:"input_nopresenta_rule(this)", onblur:"input_empty_nopresenta_rule(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.correspondency_radicate_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

      <%= form.label :creation_date, "Fecha de creación" %>
      <div class="input-group">
        <%= form.date_field :creation_date, :readonly => "readonly", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.creation_date_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :link_type, "Tipo de vinculación" %>
      <div class="input-group">
        <%= form.collection_select(:link_type, LinkType.administrative, :name, :name, {}, {class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.link_type_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :departament, "Departamento donde cursa el caso" %> <span class="red">*</span>
      <div class="input-group">
        <%= form.collection_select(:departament, Departament.get_all, :code, :name, {include_blank: "SELECCIONE"}, {id:"departament_ordinarie", required:true, class:"form-control"}) %>
        <%= form.collection_select(:departament, Departament.get_bog, :code, :name, {selected: "11"}, {id:"departament_coljuegos", required:true, class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.departament_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :cities, "Ciudad donde cursa el caso" %> <span class="red">*</span>
      <div class="input-group">
        <select name="type_process[city_case]" id="cities" required=true class="form-control">
          <option value="" disabled selected>SELECCIONE</option>
          <option value="<%= type_process.city_case %>" selected="selected"><%= type_process.city_case %></option>
        </select>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.city_case_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

      <%= form.label :litigation_source, "Fuente del litigio" %>
      <div class="input-group">
        <%= form.collection_select(:litigation_source, LitigationSource.administrative, :name, :name, {include_blank: "SELECCIONE"}, {id:"litigationSource", class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.litigation_source_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :sinisters, "Siniestro(s)", id:'sinisters_label' %>
      <div id="sinisters_container" class="sinisters">
        <%= form.fields_for :sinisters do |sinister| %>
          <%= render 'sinister_fields', f: sinister %>
        <% end %>
      </div>

      <div class="input-group">
        <%= link_to_add_association form, :sinisters, data: {association_insertion_node: '.sinisters', association_insertion_method: :append}, id:"siniesters_butt", class: "minibtn btn-default m-1" do %>
          <span class="fa">&#x2b;</span>
          Agregar Siniestro
        <% end %>
      </div>

      <%= form.label :policy_cents, "Póliza(s)", id:'policies_label' %>
      <div id="policies_container" class="policies">
        <%= form.fields_for :policies do |policy| %>
          <%= render 'policy_fields', f: policy %>
        <% end %>
      </div>

      <div class="input-group">
        <%= link_to_add_association form, :policies, data: {association_insertion_node: '.policies', association_insertion_method: :append}, id:"policies_butt", class: "minibtn btn-default m-1" do %>
          <span class="fa">&#x2b;</span>
          Agregar Póliza
        <% end %>
      </div>

      <hr />

      <%= form.label :protection, "Amparo" %>
      <div class="input-group">
        <%= form.collection_select(:protection, Protection.coljuegos, :name, :name, {:selected => type_process.send(:protection)}, {id:"protection_coljuegos", multiple:true, class:"form-control"}) %>
        <%= form.collection_select(:protection, Protection.ordinarie, :name, :name, {:selected => type_process.send(:protection)}, {id:"protection_ordinarie", multiple:true, class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.protection_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :policy_taker, "Tomador de la póliza" %>
      <div class="input-group">
        <%= form.text_field :policy_taker, id:"policy_taker", maxlength:"100", pattern:"[A-Z0-9\- ]*", title: t(:pattern), placeholder: 'NOMBRE COMPLETO', onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.policy_taker_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :contract, "Contrato concesión - Obra" %>
      <div class="input-group">
        <%= form.text_field :contract, id:"contract", maxlength:"10", pattern:"[A-Z0-9\- ]*", title: t(:pattern), onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.contract_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

      <%= form.label :notification_date, "Fecha de la notificación / vinculación" %> <span class="red">*</span>
      <div class="input-group">
        <%= form.date_field :notification_date, class:"form-control", required: true, min:"1980-1-1", max:Date.today %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.notification_date_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :process_radicate, "Número de radicación del proceso - despacho" %> <span class="red">*</span>
      <div class="input-group">
        <%= form.text_field :process_radicate, id:"process_radicate", maxlength:"100", pattern:"[A-Z0-9\- ]*", title: t(:pattern), placeholder: 'INGRESE EL NUMERO', onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", required: true, class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.judicial.process_radicate_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :attorny, "Apoderado de Previsora" %> <span class="red">*</span>
      <div class="input-group">
        <%= form.collection_select(:attorny, Attorny.get_all, :id, :name, {include_blank:"SELECCIONE"}, {class:"form-control", id:"attorny", required:true}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.attorny_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :attorny_date, "Fecha de asignación del apoderado de Previsora" %>
      <div class="input-group">
        <%= form.date_field :attorny_date, title: t(:pattern), required:true, class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.attorny_date_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :office_name, "Nombre del despacho / Tipo de Contraloría" %>
      <div class="input-group">
        <%= form.collection_select(:office_name, OfficeName.coljuegos, :name, :name, {}, {id:"office_name_col", class:"form-control"}) %>
        <%= form.collection_select(:office_name, OfficeName.ordinare, :name, :name, {include_blank:"SELECCIONE"}, {id:"office_name_ord", class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.office_name_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>
      <div class="input-group">
        <%= form.text_field :other_office_name, maxlength:"100", pattern:"[A-Z0-9\- ]*", title: t(:pattern), placeholder:'NOMBRE DEL DESPACHO', required: true, id: "office_text", class: "form-control" %>
      </div>

      <%= form.label :instance, "Etapa actual de las instancias / Instancia en la que se encuentra" %>
      <div class="input-group">
        <%= form.collection_select(:instance, Instance.administrative, :name, :name, {}, {class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.instance_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :case_state, "Estado del caso" %> <span class="red">*</span>
      <div class="input-group">
        <%= form.collection_select(:case_state, CaseState.all, :name, :name, {include_blank:"SELECCIONE"}, {id:"caseState", required:true, class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.case_state_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :current_stage, "Etapa actual" %>
      <div id="currentStageVerDiv" class="input-group">
        <%= form.collection_select(:current_stage, CurrentStage.administrative, :name, :name, {}, {id:"currentStageVer", class:"form-control"}) %>
        <%= form.hidden_field :current_stage, value:"PENDIENTE", id:"currentStageHid" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.current_stage_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

    </div>
  </div>

  <%= form.submit "Guardar", class:"btn btn-default floatRight" %>

<% end %>
