<%= javascript_include_tag "coljuegos" %>

<%= form_with(model: type_process, local: true) do |form| %>
  <% if type_process.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(type_process.errors.count, "error") %> prohibited this type_process from being saved:</h2>
      <ul>
        <% type_process.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="row">
    <div class="offset-lg-2 col-lg-8 ">

      <p>El símbolo ( <span class="red">*</span> ) marca los campos que son obligatorios.</p>

      <% if current_user.role != 3 %>
        <%= form.hidden_field :p_type, :value => 6 %>
        <%= form.hidden_field :user_id, :value => current_user.id %>
        <%= form.hidden_field :internal_lawyer, :value => current_user.name %>
        <%= form.hidden_field :internal_created %>
        <%= form.hidden_field :state, id:"state_val" %>
      <% end %>

      <hr>

      <%= form.label :process_class, "Clase de Proceso" %>
      <div class="input-group">
        <%= form.collection_select(:process_class , ProcessClass.administrative, :name, :name, {}, {class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.process_class_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :subprocess_class, "Subclase de Proceso" %> <span class="red">*</span>
      <div class="input-group">
        <%= form.collection_select(:subprocess_class , SubprocessClass.administrative, :name , :name, {selected: "COLJUEGOS"}, {class:"form-control", id:"subprocessClass", required: true}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.subprocess_class_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :case_id_bap, "Número de identificación del caso (Bizagi Access y PA)" %>
      <div class="input-group">
        <%= form.text_field :case_id_bap, id:"case_id_bap", maxlength:"100", pattern:"[A-Z0-9\- ]*", title: t(:pattern), placeholder: "INGRESE EL NUMERO", onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.case_id_bap_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :gubernatorial_way, "Tipología" %>
      <div class="input-group">
        <%= form.collection_select(:gubernatorial_way , GubernatorialWay.coljuegos, :name, :name, {include_blank: "SELECCIONE"}, {id:"gubernatorial_coljuegos", class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.gubernatorial_way_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :creation_date, "Fecha de creación" %>
      <div class="input-group">
        <%= form.date_field :creation_date, :readonly => "readonly", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.creation_date_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :office_name, "Nombre del despacho / Tipo de Contraloría" %>
      <div class="input-group">
        <%= form.collection_select(:office_name, OfficeName.coljuegos, :name, :name, {}, {id:"office_name_col", class:"form-control"}) %>
        <%= form.collection_select(:office_name, OfficeName.ordinare, :name, :name, {include_blank:"SELECCIONE"}, {id:"office_name_ord", class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.office_name_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

      <%= form.label :link_type, "Tipo de vinculación" %>
      <div class="input-group">
        <%= form.collection_select(:link_type, LinkType.administrative, :name, :name, {}, {class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.link_type_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :departament, "Departamento donde cursa el caso" %> <span class="red">*</span>
      <div class="input-group">
        <%= form.collection_select(:departament, Departament.get_all, :code, :name, {include_blank: "SELECCIONE"}, {id:"departament_ordinarie", required:true, class:"form-control"}) %>
        <%= form.collection_select(:departament, Departament.get_bog, :code, :name, {selected: "11"}, {id:"departament_coljuegos", required:true, class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.departament_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :cities, "Ciudad donde cursa el caso" %> <span class="red">*</span>
      <div class="input-group">
        <select name="type_process[city_case]" id="cities" required=true class="form-control">
          <option value="" disabled selected>SELECCIONE</option>
          <option value="<%= type_process.city_case %>" selected="selected"><%= type_process.city_case %></option>
        </select>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.city_case_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

      <%= form.label :litigation_source, "Fuente del litigio" %>
      <div class="input-group">
        <%= form.collection_select(:litigation_source, LitigationSource.administrative, :name, :name, {include_blank: "SELECCIONE"}, {id:"litigationSource", class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.litigation_source_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :sinisters, "Siniestro(s)", id:'sinisters_label' %>
      <div id="sinisters_container" class="sinisters">
        <%= form.fields_for :sinisters do |sinister| %>
          <%= render 'sinister_fields', f: sinister %>
        <% end %>
      </div>

      <div class="input-group">
        <%= link_to_add_association form, :sinisters, data: {association_insertion_node: '.sinisters', association_insertion_method: :append}, id:"siniesters_butt", class: "minibtn btn-default m-1" do %>
          <span class="fa">&#x2b;</span>
          Agregar Siniestro
        <% end %>
      </div>

      <%= form.label :policy_cents, "Póliza(s)", id:'policies_label' %>
      <div id="policies_container" class="policies">
        <%= form.fields_for :policies do |policy| %>
          <%= render 'policy_fields', f: policy %>
        <% end %>
      </div>

      <div class="input-group">
        <%= link_to_add_association form, :policies, data: {association_insertion_node: '.policies', association_insertion_method: :append}, id:"policies_butt", class: "minibtn btn-default m-1" do %>
          <span class="fa">&#x2b;</span>
          Agregar Póliza
        <% end %>
      </div>

      <hr>

      <%= form.label :attorny, "Apoderado de Previsora" %> <span class="red">*</span>
      <div class="input-group">
        <%= form.collection_select(:attorny, Attorny.get_all, :id, :name, {include_blank:"SELECCIONE"}, {class:"form-control", id:"attorny", required:true}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.attorny_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :attorny_date, "Fecha de asignación del apoderado de Previsora" %>
      <div class="input-group">
        <%= form.date_field :attorny_date, title: t(:pattern), required:true, class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.attorny_date_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :detritment_cents, "Valor de la pretensión / detrimento" %>
      <div class="input-group">
        <%= form.text_field :detritment_cents, id:"detrimetValueCents", maxlength:"20", pattern:"[0-9\,\' ]*", title: t(:pattern_n), onclick:"formatting_number(this)", onkeyup:"formatting_number(this)", onblur:"formatting_empty_number(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.detritment_cents_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :score_contingency, "Calificación de la contingencia" %>
      <div class="input-group">
        <%= form.collection_select(:score_contingency, ScoreContingency.all, :name, :name, {}, {class:"form-control"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.score_contingency_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :contingency_value_cents, "Valor de la contingencia" %>
      <div class="input-group">
        <%= form.text_field :contingency_value_cents, id:"contingencyValueCents", maxlength:"20", pattern:"[0-9\,\' ]*", title: t(:pattern_n), onclick:"formatting_number(this)", onkeyup:"formatting_number(this)", onblur:"formatting_empty_number(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.contingency_value_cents_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :desition_date, "Fecha de la primera audiencia / decisión / actuación / acto administrativo / fallo" %>
      <div class="input-group">
        <%= form.date_field :desition_date, class:"form-control", id:"desition_date" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.desition_date_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :contract, "Contrato concesión - Obra" %>
      <div class="input-group">
        <%= form.text_field :contract, id:"contract", maxlength:"10", pattern:"[A-Z0-9\- ]*", title: t(:pattern), onclick:"input_pendiente_rule(this)", onblur:"input_empty_pendiente_rule(this)", class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.contract_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :last_performance, "Última actuación" %>
      <div class="input-group">
        <%= form.collection_select(:last_performance, LastPerformance.all, :name, :name, {}, {class:"form-control", id:"lastPerformance"}) %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.last_performance_id_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <%= form.label :last_performance_date, "Fecha de la última actuación" %>
      <div class="input-group">
        <%= form.date_field :last_performance_date, id:"lastPerformanceDate", min:"1980-1-1", max:Date.today, class:"form-control" %>
        <span data-toggle="tooltip" data-html="true" title="<%= t('processes.administrative.last_performance_date_d') %>" class="input-group-addon fa fa-question m-1"  style="font-size:20px"></span>
      </div>

      <hr>

    </div>
  </div>

  <%= form.submit "Guardar", class:"btn btn-default floatRight" %>

<% end %>
